<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>De Slimste Meijers</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="app">
        <!-- Admin Login View -->
        <div id="adminLoginView" class="view">
            <div class="container">
                <div class="logo-container">
                    <h1 class="main-title">DE SLIMSTE<br><span class="highlight">ADMIN</span></h1>
                </div>
                
                <div class="login-box">
                    <h2 id="adminLoginTitle">üîê Admin Login</h2>
                    <p class="setup-subtitle" id="adminLoginSubtitle">Vul het admin wachtwoord in</p>
                    
                    <form id="adminLoginForm">
                        <div class="form-group" id="adminPasswordGroup">
                            <label for="adminLoginPassword">Wachtwoord</label>
                            <input type="password" id="adminLoginPassword" required placeholder="Voer wachtwoord in">
                        </div>
                        
                        <div class="form-group hidden" id="adminConfirmPasswordGroup">
                            <label for="adminConfirmPassword">Bevestig Wachtwoord</label>
                            <input type="password" id="adminConfirmPassword" placeholder="Bevestig je wachtwoord">
                        </div>
                        
                        <button type="submit" class="btn-primary" id="adminLoginBtn">Inloggen</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Login/Team Registration View -->
        <div id="loginView" class="view active">
            <div class="container">
                <div class="logo-container">
                    <h1 class="main-title">DE SLIMSTE<br><span class="highlight" id="loginFamilyTitle">...</span></h1>
                </div>
                
                <div class="login-box">
                    <h2>Team Aanmelden</h2>
                    <div id="gameModeDisplay" class="game-mode-display"></div>
                    <form id="teamForm">
                        <div class="form-group">
                            <label for="pinCodeInput">PIN Code (4 cijfers)</label>
                            <input type="text" id="pinCodeInput" required placeholder="Vul de 4-cijferige code in" maxlength="4" pattern="[0-9]{4}">
                            <small class="form-hint">
                                Vraag de PIN code aan de spelleider
                            </small>
                        </div>
                        
                        <div class="form-group">
                            <label for="teamName">Teamnaam (Gezinsnaam)</label>
                            <input type="text" id="teamName" required placeholder="bijv. Familie Jansen">
                        </div>
                        
                        <div class="form-group">
                            <label>Teamleden (optioneel, 1-4 spelers)</label>
                            <div id="playerInputs">
                                <input type="text" class="player-input" placeholder="Speler 1">
                                <input type="text" class="player-input" placeholder="Speler 2">
                            </div>
                            <button type="button" id="addPlayerBtn" class="btn-secondary">+ Speler Toevoegen</button>
                            <small class="form-hint">Laat leeg als je alleen een teamnaam wilt gebruiken</small>
                        </div>
                        
                        <button type="submit" class="btn-primary">Aanmelden</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Lobby View (Waiting for all teams to be ready) -->
        <div id="lobbyView" class="view">
            <div class="container">
                <div class="logo-container">
                    <h1 class="main-title">DE SLIMSTE<br><span class="highlight" id="lobbyFamilyTitle">...</span></h1>
                </div>
                
                <div class="lobby-box">
                    <h2>üéÆ Wachtkamer</h2>
                    <p class="lobby-subtitle">Wacht tot alle teams klaar zijn om te beginnen</p>
                    
                    <div class="pin-code-display">
                        <p class="pin-hint">Spel PIN Code:</p>
                        <div class="pin-code-value">
                            <span id="lobbyPinCodeValue">----</span>
                        </div>
                    </div>
                    
                    <div id="teamsList" class="teams-list"></div>
                    
                    <div class="ready-section">
                        <button id="readyBtn" class="btn-ready">‚úì Ik ben Klaar!</button>
                        <p class="ready-hint">Druk op de knop als je klaar bent om te beginnen</p>
                    </div>
                    
                    <div id="waitingMessage" class="waiting-message">
                        Wachten op andere teams...
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Game View -->
        <div id="gameView" class="view">
            <div class="game-header">
                <div class="team-info">
                    <h2 id="currentTeamName"></h2>
                    <div id="playersList"></div>
                </div>
                <div class="score-display">
                    <div class="seconds-display">
                        <span class="label">Seconden</span>
                        <span id="teamSeconds" class="score-value">60</span>
                    </div>
                </div>
            </div>

            <div class="game-content">
                <div id="roundContainer">
                    <!-- Round selection -->
                    <div id="roundSelection" class="round-select active">
                        <h2>Kies een Ronde</h2>
                        <div class="round-buttons">
                            <button class="round-btn" data-round="open-deur">
                                <span class="round-number">1</span>
                                <span class="round-name">De Open Deur</span>
                            </button>
                            <button class="round-btn" data-round="puzzel">
                                <span class="round-number">2</span>
                                <span class="round-name">De Puzzel (3 op een rij)</span>
                            </button>
                            <button class="round-btn" data-round="woordzoeker">
                                <span class="round-number">3</span>
                                <span class="round-name">De Woordzoeker</span>
                            </button>
                            <button class="round-btn" data-round="wat-weet-u">
                                <span class="round-number">4</span>
                                <span class="round-name">Wat Weet U Over...</span>
                            </button>
                            <button class="round-btn" data-round="collectief-geheugen">
                                <span class="round-number">5</span>
                                <span class="round-name">Het Collectief Geheugen</span>
                            </button>
                        </div>
                    </div>

                    <!-- Open Deur Round -->
                    <div id="openDeurRound" class="round-content">
                        <h2 class="round-title">De Open Deur</h2>
                        <div class="question-display">
                            <div id="openDeurHints" class="hints-container"></div>
                            <div id="openDeurAnswer" class="answer-input-container">
                                <input type="text" id="openDeurInput" placeholder="Type je antwoord...">
                                <button id="openDeurSubmit" class="btn-primary">Bevestig</button>
                            </div>
                        </div>
                        <button class="btn-back">‚Üê Terug naar Rondes</button>
                    </div>

                    <!-- Puzzel Round (3 op een rij) -->
                    <div id="puzzelRound" class="round-content">
                        <h2 class="round-title">De Puzzel - 3 op een rij</h2>
                        <div class="question-display">
                            <div id="puzzelInstruction" class="puzzle-instruction">Vind 3 woorden op basis van de 12 hints</div>
                            <div id="puzzelGrid" class="puzzle-grid"></div>
                            <div id="puzzelAnswers" class="puzzle-answers">
                                <div class="puzzle-answer-row">
                                    <span class="answer-label">Woord 1:</span>
                                    <input type="text" id="puzzelAnswer1" class="puzzle-answer-input" placeholder="?">
                                    <button class="btn-check" data-answer="1">‚úì</button>
                                </div>
                                <div class="puzzle-answer-row">
                                    <span class="answer-label">Woord 2:</span>
                                    <input type="text" id="puzzelAnswer2" class="puzzle-answer-input" placeholder="?">
                                    <button class="btn-check" data-answer="2">‚úì</button>
                                </div>
                                <div class="puzzle-answer-row">
                                    <span class="answer-label">Woord 3:</span>
                                    <input type="text" id="puzzelAnswer3" class="puzzle-answer-input" placeholder="?">
                                    <button class="btn-check" data-answer="3">‚úì</button>
                                </div>
                            </div>
                        </div>
                        <button class="btn-back">‚Üê Terug naar Rondes</button>
                    </div>

                    <!-- Woordzoeker Round -->
                    <div id="woordzoekerRound" class="round-content">
                        <h2 class="round-title">De Woordzoeker</h2>
                        <div class="question-display">
                            <div id="woordzoekerQuestion" class="puzzle-question"></div>
                            <div id="woordzoekerLetters" class="puzzle-letters"></div>
                            <div id="woordzoekerAnswer" class="puzzle-answer-display"></div>
                        </div>
                        <button class="btn-back">‚Üê Terug naar Rondes</button>
                    </div>

                    <!-- Wat Weet U Over Round -->
                    <div id="watWeetURound" class="round-content">
                        <h2 class="round-title">Wat Weet U Over...</h2>
                        <div class="question-display">
                            <div id="watWeetUSubject" class="wwu-subject"></div>
                            <div id="watWeetUTimer" class="wwu-timer">60</div>
                            <div id="watWeetUAnswers" class="wwu-answers"></div>
                            <div id="watWeetUInput" class="answer-input-container">
                                <input type="text" id="watWeetUInputField" placeholder="Noem een feit...">
                                <button id="watWeetUSubmit" class="btn-primary">Bevestig</button>
                            </div>
                            <div id="watWeetUScore" class="wwu-score"></div>
                        </div>
                        <button class="btn-back">‚Üê Terug naar Rondes</button>
                    </div>

                    <!-- Collectief Geheugen Round -->
                    <div id="collectiefRound" class="round-content">
                        <h2 class="round-title">Het Collectief Geheugen</h2>
                        <div class="question-display">
                            <div id="collectiefCategory" class="memory-category"></div>
                            <div id="collectiefItems" class="memory-items"></div>
                            <div id="collectiefAnswer" class="answer-input-container">
                                <input type="text" id="collectiefInput" placeholder="Type een item...">
                                <button id="collectiefSubmit" class="btn-primary">Bevestig</button>
                            </div>
                        </div>
                        <button class="btn-back">‚Üê Terug naar Rondes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scoreboard View (for display screen) -->
        <div id="scoreboardView" class="view">
            <div class="scoreboard-container">
                <h1 class="main-title">DE SLIMSTE<br><span class="highlight" id="scoreboardFamilyTitle">...</span></h1>
                
                <!-- PIN Code Display - Always Visible -->
                <div class="pin-code-display" id="scoreboardPinDisplay">
                    <h3>PIN Code voor Teams</h3>
                    <div class="pin-code-value">
                        <span id="scoreboardPinCode">----</span>
                    </div>
                </div>
                
                <!-- Lobby Section (shown before game starts) -->
                <div id="lobbySection" class="lobby-section">
                    <div class="scoreboard-header">
                        <h2>Lobby - Wachten op Teams</h2>
                        <div class="live-indicator">
                            <span class="live-dot"></span>
                            <span>LOBBY</span>
                        </div>
                    </div>
                    
                    <div id="lobbyTeamsList" class="lobby-teams-list"></div>
                    
                    <button id="startGameFromScoreboard" class="btn-primary btn-large">
                        üöÄ Start het Spel
                    </button>
                </div>
                
                <!-- Scoreboard Section (shown after game starts) -->
                <div id="scoreboardSection" class="scoreboard-section hidden">
                    <div class="scoreboard-header">
                        <h2>Scorebord</h2>
                        <div class="live-indicator">
                            <span class="live-dot"></span>
                            <span>LIVE</span>
                        </div>
                        <button id="toggleMusic" class="music-toggle">
                            <span class="music-icon">üîä</span>
                            <span class="music-text">Muziek</span>
                        </button>
                    </div>
                    <div id="scoreboardContent" class="scoreboard-grid"></div>
                    
                    <!-- End Game Button (shown when game is complete) -->
                    <div id="endGameSection" class="end-game-section hidden">
                        <button id="endGameBtn" class="end-game-btn">
                            üèÜ Be√´indig Spel
                        </button>
                        <p class="end-game-hint">Klik om het spel te be√´indigen en terug te keren naar de lobby</p>
                    </div>
                </div>
            </div>
            
            <!-- Background Music -->
            <audio id="backgroundMusic" loop>
                <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
                <!-- Fallback: gebruik een andere bron of lokaal bestand -->
            </audio>
        </div>

        <!-- Admin View -->
        <div id="adminView" class="view">
            <div class="admin-container">
                <h1>Admin Panel</h1>
                <div class="admin-tabs">
                    <button class="admin-tab active" data-tab="settings">Instellingen</button>
                    <button class="admin-tab" data-tab="questions">Vragen Beheren</button>
                    <button class="admin-tab" data-tab="game">Spel Beheren</button>
                </div>
                
                <div id="settingsTab" class="admin-content active">
                    <h2>‚öôÔ∏è Spel Configuratie</h2>
                    
                    <div id="pinCodeDisplay" class="pin-code-display hidden">
                        <h3>üî¢ Spel PIN Code</h3>
                        <div class="pin-code-value">
                            <span id="pinCodeValue">----</span>
                        </div>
                        <p class="pin-hint">Teams moeten deze code invoeren om deel te nemen</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="adminFamilyNameInput">Familienaam</label>
                        <input type="text" id="adminFamilyNameInput" placeholder="bijv. Jansen, De Vries, etc." maxlength="20">
                        <small class="form-hint">
                            Dit wordt "De Slimste [FAMILIENAAM]"
                        </small>
                    </div>
                    
                    <div class="game-mode-selection">
                        <h3>Kies Spelmodus</h3>
                        <button class="game-mode-btn" data-mode="test">
                            <span class="mode-icon">‚ö°</span>
                            <span class="mode-title">Test Modus</span>
                            <span class="mode-duration">~5 minuten</span>
                            <span class="mode-description">Minimale vragen om snel te testen</span>
                        </button>
                        
                        <button class="game-mode-btn" data-mode="short">
                            <span class="mode-icon">‚è±Ô∏è</span>
                            <span class="mode-title">Kort Spel</span>
                            <span class="mode-duration">~30 minuten</span>
                            <span class="mode-description">Perfect voor een snelle quiz</span>
                        </button>
                        
                        <button class="game-mode-btn" data-mode="normal">
                            <span class="mode-icon">üéØ</span>
                            <span class="mode-title">Normaal Spel</span>
                            <span class="mode-duration">~60 minuten</span>
                            <span class="mode-description">Volledige ervaring (aanbevolen)</span>
                        </button>
                        
                        <button class="game-mode-btn" data-mode="long">
                            <span class="mode-icon">üèÜ</span>
                            <span class="mode-title">Lang Spel</span>
                            <span class="mode-duration">~90 minuten</span>
                            <span class="mode-description">Maximale uitdaging</span>
                        </button>
                    </div>
                    
                    <button id="saveSettingsBtn" class="btn-primary">üíæ Instellingen Opslaan</button>
                    
                    <hr>
                    
                    <h2>üîê Wachtwoord Wijzigen</h2>
                    <div class="form-group">
                        <label for="currentPassword">Huidig Wachtwoord</label>
                        <input type="password" id="currentPassword" placeholder="Vul huidig wachtwoord in">
                    </div>
                    <div class="form-group">
                        <label for="newPassword">Nieuw Wachtwoord</label>
                        <input type="password" id="newPassword" placeholder="Vul nieuw wachtwoord in">
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Bevestig Nieuw Wachtwoord</label>
                        <input type="password" id="confirmPassword" placeholder="Bevestig nieuw wachtwoord">
                    </div>
                    <button id="changePasswordBtn" class="btn-secondary">üîë Wachtwoord Wijzigen</button>
                </div>
                
                <div id="questionsTab" class="admin-content">
                    <h2>Vragen Toevoegen</h2>
                    <form id="addQuestionForm">
                        <div class="form-group">
                            <label for="questionType">Ronde Type</label>
                            <select id="questionType" required>
                                <option value="open-deur">De Open Deur</option>
                                <option value="puzzel">De Puzzel (3 op een rij)</option>
                                <option value="woordzoeker">De Woordzoeker</option>
                                <option value="wat-weet-u">Wat Weet U Over...</option>
                                <option value="collectief-geheugen">Het Collectief Geheugen</option>
                            </select>
                        </div>
                        
                        <div id="questionFields"></div>
                        
                        <button type="submit" class="btn-primary">Vraag Toevoegen</button>
                    </form>
                    
                    <div id="questionsList" class="questions-list"></div>
                </div>
                
                <div id="gameTab" class="admin-content">
                    <h2>üéÆ Spel Starten</h2>
                    <p>Start het spel handmatig wanneer alle teams zijn geregistreerd.</p>
                    <button id="startGameBtn" class="btn-primary btn-large">üöÄ Start het Spel voor Alle Teams</button>
                    
                    <hr>
                    
                    <h2>üë• Actieve Teams</h2>
                    <div id="activeTeams"></div>
                    
                    <hr>
                    
                    <h2>üîÑ Spel Reset</h2>
                    <p>Reset het spel om een nieuwe sessie te beginnen. Teams blijven behouden maar scores worden gereset.</p>
                    <button id="resetGameBtn" class="btn-danger">üîÑ Reset Spel (Behoud Teams)</button>
                    
                    <hr>
                    
                    <h2>üóëÔ∏è Volledige Reset</h2>
                    <p class="warning-text">‚ö†Ô∏è Waarschuwing: Dit verwijdert ALLE teams en reset het volledige spel!</p>
                    <button id="fullResetBtn" class="btn-danger">üóëÔ∏è Volledige Reset (Verwijder Alles)</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav id="mainNav">
        <button data-view="loginView">Home</button>
        <button data-view="gameView">Spelen</button>
        <button data-view="scoreboardView">Scorebord</button>
        <button data-view="adminView">Admin</button>
    </nav>

    <!-- Firebase SDK -->
    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>
